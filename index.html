<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dwarfhold</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="title-screen" class="screen">
      <div class="title-background" aria-hidden="true"></div>
      <div class="title-overlay">
        <h1 class="game-title">
          <span class="sr-only">Dwarfhold</span>
          <img src="tilesheet/logo.png" alt="" class="game-logo" />
        </h1>
        <p class="tagline">Procedural realms carved from stone and soil.</p>
        <div class="title-buttons">
          <button id="start-button" class="primary">Start Game</button>
          <button id="title-options-button" class="secondary">Options</button>
        </div>
      </div>
    </div>

    <section id="options-panel" class="modal hidden" aria-label="Game options">
      <form id="options-form">
        <h2>World Options</h2>
        <label for="map-size">Map size</label>
        <select id="map-size" name="mapSize">
          <option value="mini">Mini</option>
          <option value="small">Small</option>
          <option value="normal" selected>Normal</option>
          <option value="large">Large</option>
          <option value="extra-large">Extra Large</option>
        </select>
        <label>
          World seed
          <input type="text" id="world-seed" name="worldSeed" placeholder="Random" />
        </label>
        <label for="forest-frequency">
          Forest frequency
          <div class="slider-control">
            <input
              id="forest-frequency"
              name="forestFrequency"
              type="range"
              min="0"
              max="100"
              step="1"
              value="35"
            />
            <span id="forest-frequency-value" class="slider-value" aria-live="polite"
              >35% — Low</span
            >
          </div>
        </label>
        <label for="mountain-frequency">
          Mountain frequency
          <div class="slider-control">
            <input
              id="mountain-frequency"
              name="mountainFrequency"
              type="range"
              min="0"
              max="100"
              step="1"
              value="35"
            />
            <span id="mountain-frequency-value" class="slider-value" aria-live="polite"
              >35% — Low</span
            >
          </div>
        </label>
        <label for="river-frequency">
          River frequency
          <div class="slider-control">
            <input
              id="river-frequency"
              name="riverFrequency"
              type="range"
              min="0"
              max="100"
              step="1"
              value="50"
            />
            <span id="river-frequency-value" class="slider-value" aria-live="polite"
              >50% — Balanced</span
            >
          </div>
        </label>
        <label for="human-settlement-frequency">
          Human settlement frequency
          <div class="slider-control">
            <input
              id="human-settlement-frequency"
              name="humanSettlementFrequency"
              type="range"
              min="0"
              max="100"
              step="1"
              value="50"
            />
            <span
              id="human-settlement-frequency-value"
              class="slider-value"
              aria-live="polite"
              >50% — Balanced</span
            >
          </div>
        </label>
        <label for="dwarf-settlement-frequency">
          Dwarf settlement frequency
          <div class="slider-control">
            <input
              id="dwarf-settlement-frequency"
              name="dwarfSettlementFrequency"
              type="range"
              min="0"
              max="100"
              step="1"
              value="50"
            />
            <span
              id="dwarf-settlement-frequency-value"
              class="slider-value"
              aria-live="polite"
              >50% — Balanced</span
            >
          </div>
        </label>
        <label for="wood-elf-settlement-frequency">
          Wood elf settlement frequency
          <div class="slider-control">
            <input
              id="wood-elf-settlement-frequency"
              name="woodElfSettlementFrequency"
              type="range"
              min="0"
              max="100"
              step="1"
              value="50"
            />
            <span
              id="wood-elf-settlement-frequency-value"
              class="slider-value"
              aria-live="polite"
              >50% — Balanced</span
            >
          </div>
        </label>
        <div class="modal-buttons">
          <button type="submit" class="primary">Apply</button>
          <button type="button" id="close-options" class="secondary">Close</button>
        </div>
      </form>
    </section>

    <section id="world-info" class="screen hidden embark-screen" aria-label="World information">
      <div class="embark-backdrop" aria-hidden="true"></div>
      <form id="world-info-form" class="embark-panel">
        <header class="embark-header">
          <p class="embark-eyebrow">Embark Preparation</p>
          <h2>Ready the Expedition</h2>
          <p class="embark-description">
            Review the realm before you and give your dwarves a worthy tale to tell.
          </p>
        </header>
        <div class="embark-content">
          <section class="embark-summary" aria-live="polite">
            <dl class="world-stats">
              <div>
                <dt>Map size</dt>
                <dd id="world-info-size">—</dd>
              </div>
              <div>
                <dt>Seed</dt>
                <dd id="world-info-seed">—</dd>
              </div>
              <div>
                <dt>Chronology</dt>
                <dd id="world-info-chronology">—</dd>
              </div>
            </dl>
            <div class="embark-hero" aria-hidden="true">
              <div class="embark-hero-overlay"></div>
            </div>
          </section>
          <section class="embark-form">
            <div class="world-chronology-inputs">
              <label for="world-year-input">
                Year
                <input
                  type="number"
                  id="world-year-input"
                  name="worldYear"
                  min="0"
                  max="50000"
                  inputmode="numeric"
                  autocomplete="off"
                  required
                />
              </label>
              <label for="world-age-input">
                Age
                <input
                  type="number"
                  id="world-age-input"
                  name="worldAge"
                  min="2"
                  max="20"
                  inputmode="numeric"
                  autocomplete="off"
                  required
                />
              </label>
              <button type="button" id="world-chronology-random" class="secondary">Randomise</button>
            </div>
            <label class="world-map-size-label" for="world-map-size-select">Map size</label>
            <div class="world-map-size-input">
              <select id="world-map-size-select" name="worldMapSize">
                <option value="mini">Mini — 120 × 90</option>
                <option value="small">Small — 160 × 120</option>
                <option value="normal">Normal — 200 × 150</option>
                <option value="large">Large — 260 × 195</option>
                <option value="extra-large">Extra Large — 320 × 240</option>
              </select>
            </div>
            <label class="world-seed-label" for="world-seed-input">World seed</label>
            <div class="world-seed-input">
              <input
                type="text"
                id="world-seed-input"
                name="worldSeed"
                maxlength="32"
                placeholder="Random"
                autocomplete="off"
              />
            </div>
            <label class="world-name-label" for="world-name-input">World name</label>
            <div class="world-name-input">
              <input type="text" id="world-name-input" name="worldName" maxlength="60" autocomplete="off" required />
              <button type="button" id="world-name-random" class="secondary">Randomise</button>
            </div>
            <p class="embark-flavour">
              "Strike the earth!" whispers through the caverns. Only you can choose the legend they'll carve.
            </p>
          </section>
        </div>
        <footer class="embark-actions">
          <button type="button" id="world-info-cancel" class="secondary">Back</button>
          <button type="submit" class="primary">Embark</button>
        </footer>
      </form>
    </section>

    <section
      id="dwarf-customizer"
      class="screen hidden embark-screen"
      aria-label="Founder customiser"
    >
      <div class="embark-backdrop" aria-hidden="true"></div>
      <form id="dwarf-customizer-form" class="embark-panel">
        <header class="embark-header embark-header--founder">
          <img
            src="tilesheet/charactercreationtitle.png"
            alt="Character creation title"
            class="founder-title-image"
          />
        </header>
        <div class="customizer-layout">
          <section class="customizer-main" aria-live="polite">
            <div class="customizer-main-card">
              <div class="customizer-top-bar pixel-bar">
                <button
                  type="button"
                  id="dwarf-prev"
                  class="secondary dwarf-nav-button dwarf-nav-button--prev"
                  aria-label="Previous dwarf"
                >
                  <span class="dwarf-nav-icon" aria-hidden="true"></span>
                </button>
                <div class="dwarf-slot-info" aria-labelledby="founder-name-label">
                  <p id="dwarf-slot-label" class="slot-label" aria-live="polite"></p>
                  <label
                    id="founder-name-label"
                    class="field-label sr-only"
                    for="dwarf-name-input"
                    >Founder name</label
                  >
                  <input
                    type="text"
                    id="dwarf-name-input"
                    class="dwarf-name-input"
                    maxlength="40"
                    autocomplete="off"
                    required
                  />
                </div>
                <button
                  type="button"
                  id="dwarf-next"
                  class="secondary dwarf-nav-button"
                  aria-label="Next dwarf"
                >
                  <span class="dwarf-nav-icon" aria-hidden="true"></span>
                </button>
              </div>
              <div class="customizer-body">
                <div class="customizer-visuals">
                  <div class="customizer-preview" role="group" aria-label="Appearance preview">
                    <h3 class="subpanel-title">Appearance</h3>
                    <div id="dwarf-portrait" class="dwarf-portrait" role="img" aria-label="Dwarf portrait">
                      <canvas
                        id="dwarf-portrait-canvas"
                        class="dwarf-portrait-canvas"
                        width="128"
                        height="128"
                        aria-hidden="true"
                      ></canvas>
                    </div>
                    <p id="dwarf-trait-summary" class="trait-summary"></p>
                    <div
                      id="dwarf-trait-attributes"
                      class="trait-attributes"
                      aria-live="polite"
                      role="list"
                    ></div>
                  </div>
                </div>
                <div class="customizer-fields">
                  <div class="field-group field-group--gender">
                      <p id="dwarf-gender-label" class="field-label">Gender</p>
                      <div class="gender-toggle-wrapper">
                        <button
                          type="button"
                          id="dwarf-randomise"
                          class="gender-toggle-randomise"
                          aria-label="Randomise dwarf"
                        >
                          <span class="randomise-button__dice" aria-hidden="true"></span>
                          <span class="sr-only">Randomise dwarf</span>
                        </button>
                        <div
                          id="dwarf-gender-buttons"
                          class="gender-toggle"
                          role="radiogroup"
                          aria-labelledby="dwarf-gender-label"
                        >
                          <button
                            type="button"
                            class="gender-toggle-button gender-toggle-button--female"
                            data-gender-value="female"
                            role="radio"
                            aria-checked="true"
                          >
                            <img
                              src="tilesheet/gender-button-female.png"
                              alt="Female"
                              width="87"
                              height="88"
                              loading="lazy"
                            />
                          </button>
                          <button
                            type="button"
                            class="gender-toggle-button gender-toggle-button--male"
                            data-gender-value="male"
                            role="radio"
                            aria-checked="false"
                          >
                            <img
                              src="tilesheet/gender-button-male.png"
                              alt="Male"
                              width="87"
                              height="88"
                              loading="lazy"
                            />
                          </button>
                        </div>
                      </div>
                    </div>

                    <div class="field-group">
                      <label for="dwarf-clan-select" class="field-label">Clan</label>
                      <select id="dwarf-clan-select" class="field-control">
                        <option value="stonebeard">Stonebeard</option>
                        <option value="ironfist">Ironfist</option>
                        <option value="coppervein">Coppervein</option>
                        <option value="graniteheart">Graniteheart</option>
                        <option value="deepdelver">Deepdelver</option>
                        <option value="amberpick">Amberpick</option>
                        <option value="oakenshield">Oakenshield</option>
                        <option value="frosthammer">Frosthammer</option>
                        <option value="berylbraid">Berylbraid</option>
                        <option value="silverhollow">Silverhollow</option>
                      </select>
                    </div>

                    <div class="field-group">
                      <label for="dwarf-guild-select" class="field-label">Guild</label>
                      <select id="dwarf-guild-select" class="field-control">
                        <option value="miners-guild">Miners Guild</option>
                        <option value="merchants-guild">Merchants Guild</option>
                        <option value="commerce-guild">Commerce Guild</option>
                        <option value="armourers-weaponsmiths-guild">Armourers and Weaponsmiths Guild</option>
                        <option value="artisans-guild">Artisans Guild</option>
                        <option value="bakers-guild">Bakers Guild</option>
                        <option value="brewers-guild">Brewers Guild</option>
                        <option value="carpenters-guild">Carpenters Guild</option>
                        <option value="construction-guild">Construction Guild</option>
                        <option value="corpsebinders-guild">Corpsebinders Guild</option>
                        <option value="distiller-guild">Distiller Guild</option>
                        <option value="dyers-guild">Dyers Guild</option>
                        <option value="engineers-guild">Engineers Guild</option>
                        <option value="farmers-herders-guild">Farmers and Herders Guild</option>
                        <option value="gemcutters-guild">Gemcutters Guild</option>
                        <option value="goldsmiths-guild">Goldsmiths Guild</option>
                        <option value="guild-of-alchemists">Guild of Alchemists</option>
                        <option value="jewelsmiths-guild">Jewelsmiths Guild</option>
                        <option value="leatherworkers-guild">Leatherworkers Guild</option>
                        <option value="metalsmiths-guild">Metalsmiths Guild</option>
                        <option value="powdermakers-guild">Powdermakers Guild</option>
                        <option value="saltworkers-guild">Saltworkers Guild</option>
                        <option value="stonemasons-guild">Stonemasons Guild</option>
                        <option value="runescribes-guild">Runescribes Guild</option>
                        <option value="runesmiths">Runesmiths</option>
                        <option value="warriors-guild">Warriors Guild</option>
                        <option value="toolmakers-guild">Toolmakers' Guild</option>
                        <option value="soapmakers-guild">Soapmakers Guild</option>
                        <option value="candlelighters-guild">Candlelighters Guild</option>
                        <option value="lamplighters-guild">Lamplighters Guild</option>
                        <option value="butchers-guild">Butchers Guild</option>
                        <option value="ropemakers-guild">Ropemakers Guild</option>
                        <option value="cartwrights-wheelwrights-guild">Cartwrights &amp; Wheelwrights Guild</option>
                        <option value="glassblowers-guild">Glassblowers Guild</option>
                        <option value="millers-guild">Millers Guild</option>
                        <option value="cobblers-guild">Cobblers Guild</option>
                        <option value="cartographers-guild">Cartographers Guild</option>
                        <option value="lorekeepers-guild">Lorekeepers Guild</option>
                        <option value="tunnel-wardens-guild">Tunnel Wardens Guild</option>
                        <option value="smelters-guild">Smelters Guild</option>
                      </select>
                    </div>

                    <div class="field-group">
                      <label for="dwarf-profession-select" class="field-label">Profession</label>
                      <select id="dwarf-profession-select" class="field-control">
                        <option value="miner">Miner</option>
                        <option value="mason">Master Mason</option>
                        <option value="smith">Master Smith</option>
                        <option value="brewer">Brewmaster</option>
                        <option value="engineer">Chief Engineer</option>
                        <option value="scholar">Lore Scholar</option>
                        <option value="ranger">Ranger Captain</option>
                        <option value="carpenter">Master Carpenter</option>
                        <option value="jewelcrafter">Gemcutter</option>
                      </select>
                    </div>

                    <div class="field-group">
                      <label for="dwarf-skin-slider" class="field-label">Skin tone</label>
                      <div class="trait-slider">
                        <div class="trait-slider-visual">
                          <input
                            id="dwarf-skin-slider"
                            class="trait-slider-input"
                            type="range"
                            min="0"
                            max="0"
                            step="1"
                            value="0"
                          />
                        </div>
                        <div
                          id="dwarf-skin-slider-value"
                          class="trait-slider-value has-color"
                          aria-live="polite"
                        >
                          Deep Umber
                        </div>
                      </div>
                    </div>

                    <div class="field-group">
                      <label for="dwarf-head-slider" class="field-label">Head type</label>
                      <div class="trait-slider">
                        <div class="trait-slider-visual">
                          <input
                            id="dwarf-head-slider"
                            class="trait-slider-input"
                            type="range"
                            min="0"
                            max="0"
                            step="1"
                            value="0"
                          />
                        </div>
                        <div
                          id="dwarf-head-slider-value"
                          class="trait-slider-value"
                          aria-live="polite"
                        >
                          Head Type V
                        </div>
                      </div>
                    </div>

                    <div class="field-group">
                      <label for="dwarf-eye-slider" class="field-label">Eye colour</label>
                      <div class="trait-slider">
                        <div class="trait-slider-visual">
                          <input
                            id="dwarf-eye-slider"
                            class="trait-slider-input"
                            type="range"
                            min="0"
                            max="0"
                            step="1"
                            value="0"
                          />
                        </div>
                        <div
                          id="dwarf-eye-slider-value"
                          class="trait-slider-value"
                          aria-live="polite"
                        >
                          Amber
                        </div>
                      </div>
                    </div>

                    <div class="field-group">
                      <label for="dwarf-hair-style-slider" class="field-label">Hair style</label>
                      <div class="trait-slider">
                        <div class="trait-slider-visual">
                          <input
                            id="dwarf-hair-style-slider"
                            class="trait-slider-input"
                            type="range"
                            min="0"
                            max="0"
                            step="1"
                            value="0"
                          />
                        </div>
                        <div
                          id="dwarf-hair-style-slider-value"
                          class="trait-slider-value"
                          aria-live="polite"
                        >
                          Straight — Shoulder Length
                        </div>
                      </div>
                    </div>

                    <div class="field-group field-group--hair-colour">
                      <label for="dwarf-hair-slider" class="field-label">Hair colour</label>
                      <div class="hair-colour-controls">
                        <div class="trait-slider">
                          <div class="trait-slider-visual">
                            <input
                              id="dwarf-hair-slider"
                              class="trait-slider-input"
                              type="range"
                              min="0"
                              max="0"
                              step="1"
                              value="0"
                            />
                          </div>
                          <div
                            id="dwarf-hair-slider-value"
                            class="trait-slider-value"
                            aria-live="polite"
                          >
                            Obsidian Black
                          </div>
                        </div>
                        <button type="submit" class="create-button create-button--inline">
                          <span class="sr-only">Begin Expedition</span>
                        </button>
                      </div>
                    </div>

                    <div class="field-group" id="dwarf-beard-field-group">
                      <label for="dwarf-beard-slider" class="field-label">Beard style</label>
                      <div class="trait-slider">
                        <div class="trait-slider-visual">
                          <input
                            id="dwarf-beard-slider"
                            class="trait-slider-input"
                            type="range"
                            min="0"
                            max="0"
                            step="1"
                            value="0"
                          />
                        </div>
                        <div
                          id="dwarf-beard-slider-value"
                          class="trait-slider-value"
                          aria-live="polite"
                        >
                          Clean-shaven
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="customizer-inline-actions">
                <button type="button" id="dwarf-back" class="return-button">
                  <span class="sr-only">Back</span>
                </button>
              </div>
            </div>
          </section>
        </div>
      </form>
    </section>

    <div id="game-container" class="screen hidden">
      <header class="game-ui">
        <div class="controls">
          <button id="regenerate-button" class="primary">Regenerate</button>
          <button id="in-game-options" class="secondary">Options</button>
          <button
            id="toggle-political-borders"
            class="secondary"
            type="button"
            aria-pressed="false"
          >
            Show Borders
          </button>
          <button
            id="toggle-political-influence"
            class="secondary"
            type="button"
            aria-pressed="false"
          >
            Show Influence
          </button>
        </div>
        <div class="audio-controls" role="region" aria-label="Music controls">
          <button id="music-toggle" type="button" class="secondary">Play Music</button>
          <label class="volume-control" for="music-volume">
            Volume
            <input id="music-volume" type="range" min="0" max="1" step="0.01" value="0.5" />
          </label>
          <div id="music-now-playing" class="now-playing" aria-live="polite"></div>
        </div>
        <div class="seed-display" aria-live="polite"></div>
      </header>
      <main class="canvas-wrapper">
        <canvas id="world-canvas" width="6400" height="4800"></canvas>
        <div id="world-tooltip" class="map-tooltip" aria-hidden="true"></div>
      </main>
    </div>

    <audio id="background-music" preload="auto" aria-hidden="true" tabindex="-1"></audio>
    <script src="main.js" type="module"></script>
  </body>
</html>
