<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dwarfhold Valley</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="title-screen" class="screen">
      <div class="title-background" aria-hidden="true"></div>
      <div class="title-overlay">
        <h1 class="game-title">Dwarfhold Valley</h1>
        <p class="tagline">Procedural realms carved from stone and soil.</p>
        <div class="title-buttons">
          <button id="start-button" class="primary">Start Game</button>
          <button id="title-options-button" class="secondary">Options</button>
        </div>
      </div>
    </div>

    <section id="options-panel" class="modal hidden" aria-label="Game options">
      <form id="options-form">
        <h2>World Options</h2>
        <label>
          Map width (tiles)
          <input type="number" id="map-width" name="mapWidth" min="30" max="1024" value="200" />
        </label>
        <label>
          Map height (tiles)
          <input type="number" id="map-height" name="mapHeight" min="20" max="1024" value="150" />
        </label>
        <label>
          World seed
          <input type="text" id="world-seed" name="worldSeed" placeholder="Random" />
        </label>
        <div class="modal-buttons">
          <button type="submit" class="primary">Apply</button>
          <button type="button" id="close-options" class="secondary">Close</button>
        </div>
      </form>
    </section>

    <section id="world-info" class="screen hidden embark-screen" aria-label="World information">
      <div class="embark-backdrop" aria-hidden="true"></div>
      <form id="world-info-form" class="embark-panel">
        <header class="embark-header">
          <p class="embark-eyebrow">Embark Preparation</p>
          <h2>Ready the Expedition</h2>
          <p class="embark-description">
            Review the realm before you and give your dwarves a worthy tale to tell.
          </p>
        </header>
        <div class="embark-content">
          <section class="embark-summary" aria-live="polite">
            <dl class="world-stats">
              <div>
                <dt>Map size</dt>
                <dd id="world-info-size">—</dd>
              </div>
              <div>
                <dt>Seed</dt>
                <dd id="world-info-seed">—</dd>
              </div>
              <div>
                <dt>Chronology</dt>
                <dd id="world-info-chronology">—</dd>
              </div>
            </dl>
            <div class="embark-hero" aria-hidden="true">
              <div class="embark-hero-overlay"></div>
            </div>
          </section>
          <section class="embark-form">
            <div class="world-chronology-inputs">
              <label for="world-year-input">
                Year
                <input
                  type="number"
                  id="world-year-input"
                  name="worldYear"
                  min="1"
                  max="50000"
                  inputmode="numeric"
                  autocomplete="off"
                  required
                />
              </label>
              <label for="world-age-input">
                Age
                <input
                  type="number"
                  id="world-age-input"
                  name="worldAge"
                  min="1"
                  max="30"
                  inputmode="numeric"
                  autocomplete="off"
                  required
                />
              </label>
              <button type="button" id="world-chronology-random" class="secondary">Randomise</button>
            </div>
            <label class="world-name-label" for="world-name-input">World name</label>
            <div class="world-name-input">
              <input type="text" id="world-name-input" name="worldName" maxlength="60" autocomplete="off" required />
              <button type="button" id="world-name-random" class="secondary">Randomise</button>
            </div>
            <p class="embark-flavour">
              "Strike the earth!" whispers through the caverns. Only you can choose the legend they'll carve.
            </p>
          </section>
        </div>
        <footer class="embark-actions">
          <button type="button" id="world-info-cancel" class="secondary">Back</button>
          <button type="submit" class="primary">Embark</button>
        </footer>
      </form>
    </section>

    <section
      id="dwarf-customizer"
      class="screen hidden embark-screen"
      aria-label="Expedition party customiser"
    >
      <div class="embark-backdrop" aria-hidden="true"></div>
      <form id="dwarf-customizer-form" class="embark-panel">
        <header class="embark-header">
          <p class="embark-eyebrow">Expedition Roster</p>
          <h2>Design Your Founders</h2>
          <p class="embark-description">
            Tune the look of each dwarf before striking the earth.
          </p>
        </header>
        <div class="customizer-layout">
          <aside class="roster-column" aria-label="Party overview">
            <h3>Expedition Party</h3>
            <ul id="dwarf-roster-list" class="dwarf-roster-list" role="list"></ul>
            <div class="roster-actions">
              <button type="button" id="dwarf-randomise-all" class="secondary">
                Randomise Entire Party
              </button>
            </div>
          </aside>
          <section class="customizer-main" aria-live="polite">
            <div class="customizer-top-bar">
              <button type="button" id="dwarf-prev" class="secondary" aria-label="Previous dwarf">
                ◀
              </button>
              <div class="dwarf-slot-info">
                <p id="dwarf-slot-label" class="slot-label">Dwarf 1 of 1</p>
                <label class="field-label" for="dwarf-name-input">Name</label>
                <input
                  type="text"
                  id="dwarf-name-input"
                  class="dwarf-name-input"
                  maxlength="40"
                  autocomplete="off"
                  required
                />
              </div>
              <button type="button" id="dwarf-next" class="secondary" aria-label="Next dwarf">
                ▶
              </button>
            </div>
            <div class="customizer-preview" role="group" aria-label="Appearance preview">
              <div id="dwarf-portrait" class="dwarf-portrait" role="img" aria-label="Dwarf portrait">
                <canvas
                  id="dwarf-portrait-canvas"
                  class="dwarf-portrait-canvas"
                  width="128"
                  height="128"
                  aria-hidden="true"
                ></canvas>
              </div>
              <p id="dwarf-trait-summary" class="trait-summary"></p>
            </div>
            <div class="customizer-fields">
              <label for="dwarf-gender-select" class="field-label">Gender</label>
              <select id="dwarf-gender-select" class="field-control">
                <option value="female">Female</option>
                <option value="male">Male</option>
                <option value="nonbinary">Non-binary</option>
              </select>

              <label for="dwarf-skin-select" class="field-label">Skin tone</label>
              <select id="dwarf-skin-select" class="field-control">
                <option value="umber">Deep Umber</option>
                <option value="russet">Russet Bronze</option>
                <option value="sienna">Burnt Sienna</option>
                <option value="dawn">Dawn Rose</option>
                <option value="pearl">Pale Pearl</option>
                <option value="ashen">Ashen Slate</option>
              </select>

              <label for="dwarf-eye-select" class="field-label">Eye colour</label>
              <select id="dwarf-eye-select" class="field-control">
                <option value="amber">Amber</option>
                <option value="hazel">Hazel</option>
                <option value="emerald">Emerald</option>
                <option value="ice">Ice Blue</option>
                <option value="onyx">Onyx</option>
                <option value="steel">Steel Grey</option>
                <option value="violet">Violet</option>
              </select>

              <label for="dwarf-hair-select" class="field-label">Hair colour</label>
              <select id="dwarf-hair-select" class="field-control">
                <option value="obsidian">Obsidian Black</option>
                <option value="umber">Rich Umber</option>
                <option value="auburn">Deep Auburn</option>
                <option value="copper">Copper Red</option>
                <option value="golden">Golden Wheat</option>
                <option value="ashen">Ashen Silver</option>
                <option value="white">Snow White</option>
              </select>

              <label for="dwarf-beard-select" class="field-label">Beard style</label>
              <select id="dwarf-beard-select" class="field-control">
                <option value="clean">Clean-shaven</option>
                <option value="short">Short Beard</option>
                <option value="full">Full Beard</option>
                <option value="braided">Braided Beard</option>
                <option value="forked">Forked Beard</option>
                <option value="mutton">Mutton Chops</option>
              </select>
            </div>
            <div class="customizer-inline-actions">
              <button type="button" id="dwarf-randomise" class="secondary">Randomise Dwarf</button>
            </div>
          </section>
        </div>
        <footer class="embark-actions customizer-actions">
          <button type="button" id="dwarf-back" class="secondary">Back</button>
          <button type="submit" class="primary">Begin Expedition</button>
        </footer>
      </form>
    </section>

    <div id="game-container" class="screen hidden">
      <header class="game-ui">
        <div class="controls">
          <button id="regenerate-button" class="primary">Regenerate</button>
          <button id="in-game-options" class="secondary">Options</button>
        </div>
        <div class="audio-controls" role="region" aria-label="Music controls">
          <button id="music-toggle" type="button" class="secondary">Play Music</button>
          <label class="volume-control" for="music-volume">
            Volume
            <input id="music-volume" type="range" min="0" max="1" step="0.01" value="0.5" />
          </label>
          <div id="music-now-playing" class="now-playing" aria-live="polite"></div>
        </div>
        <div class="seed-display" aria-live="polite"></div>
      </header>
      <main class="canvas-wrapper">
        <canvas id="world-canvas" width="6400" height="4800"></canvas>
      </main>
    </div>

    <audio id="background-music" preload="auto" aria-hidden="true" tabindex="-1"></audio>
    <script src="main.js" type="module"></script>
  </body>
</html>
